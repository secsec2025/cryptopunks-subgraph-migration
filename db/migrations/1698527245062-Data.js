module.exports = class Data1698527245062 {
    name = 'Data1698527245062'

    async up(db) {
        await db.query(`CREATE TABLE "trait" ("id" character varying NOT NULL, "type" character varying(9) NOT NULL, "number_of_nfts" numeric NOT NULL, CONSTRAINT "PK_c5d145e577199fe58afbf2a1b2d" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "meta_data_trait" ("id" character varying NOT NULL, "metadata_id" character varying, "trait_id" character varying, CONSTRAINT "PK_69f692521468b9fef760804dc59" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_5133265a0f5dd3d51028aeb4cf" ON "meta_data_trait" ("metadata_id") `)
        await db.query(`CREATE INDEX "IDX_d8a43a8848bbf89b2eeef98431" ON "meta_data_trait" ("trait_id") `)
        await db.query(`CREATE TABLE "meta_data" ("id" character varying NOT NULL, "token_id" numeric NOT NULL, "token_uri" text NOT NULL, "image" text, "svg" text, "contract_uri" text NOT NULL, "punk_id" character varying, CONSTRAINT "PK_fc43762ebfedfc282ee84ba63d3" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_7c904f6769acce17917d2786f3" ON "meta_data" ("punk_id") `)
        await db.query(`CREATE TABLE "contract" ("id" character varying NOT NULL, "symbol" text, "name" text, "total_supply" numeric NOT NULL, "total_sales" numeric NOT NULL, "total_amount_traded" numeric NOT NULL, "image_hash" text, CONSTRAINT "PK_17c3a89f58a2997276084e706e8" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "event" ("id" character varying NOT NULL, "amount" numeric, "type" character varying(11) NOT NULL, "log_number" numeric NOT NULL, "block_number" numeric NOT NULL, "block_hash" bytea NOT NULL, "tx_hash" bytea NOT NULL, "timestamp" numeric NOT NULL, "contract_id" character varying, "nft_id" character varying, "to_id" character varying, "from_id" character varying, CONSTRAINT "PK_30c2f3bbaf6d34a55f8ae6e4614" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_d7f8e8d962be3bdcb947d337fe" ON "event" ("contract_id") `)
        await db.query(`CREATE INDEX "IDX_9380d479563e5a664759359470" ON "event" ("nft_id") `)
        await db.query(`CREATE INDEX "IDX_3c07e2966f5f354edc1bf90fb5" ON "event" ("to_id") `)
        await db.query(`CREATE INDEX "IDX_1ef887466d1bba1027a21c28e6" ON "event" ("from_id") `)
        await db.query(`CREATE TABLE "offer" ("id" character varying NOT NULL, "open" boolean NOT NULL, "amount" numeric NOT NULL, "offer_type" character varying(3) NOT NULL, "from_id" character varying, "nft_id" character varying, "created_id" character varying, "removed_id" character varying, CONSTRAINT "PK_57c6ae1abe49201919ef68de900" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_a48706ab0d0e6edaf3eeb72951" ON "offer" ("from_id") `)
        await db.query(`CREATE INDEX "IDX_71609884f4478ed41be6672a66" ON "offer" ("nft_id") `)
        await db.query(`CREATE INDEX "IDX_3016d78cdb8099a58d883ee54d" ON "offer" ("created_id") `)
        await db.query(`CREATE INDEX "IDX_709c5e5468058229b0cb7387d7" ON "offer" ("removed_id") `)
        await db.query(`CREATE TABLE "punk" ("id" character varying NOT NULL, "token_id" numeric NOT NULL, "wrapped" boolean NOT NULL, "number_of_transfers" numeric NOT NULL, "number_of_sales" numeric NOT NULL, "total_amount_spent_on_punk" numeric NOT NULL, "average_sale_price" numeric NOT NULL, "transfered_to_id" character varying, "assigned_to_id" character varying, "purchased_by_id" character varying, "metadata_id" character varying, "contract_id" character varying, "owner_id" character varying, "current_ask_id" character varying, "current_bid_id" character varying, "current_ask_created_id" character varying, "current_bid_created_id" character varying, "current_ask_removed_id" character varying, "current_bid_removed_id" character varying, CONSTRAINT "PK_d63ed31964aae4be18cdacff38b" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_342776eb379a216795cc9f727d" ON "punk" ("transfered_to_id") `)
        await db.query(`CREATE INDEX "IDX_68b6c75e96f08033b03127e489" ON "punk" ("assigned_to_id") `)
        await db.query(`CREATE INDEX "IDX_78d46efff1a45a89276d26d85f" ON "punk" ("purchased_by_id") `)
        await db.query(`CREATE INDEX "IDX_bb4f8f81f3861d03da316829ec" ON "punk" ("metadata_id") `)
        await db.query(`CREATE INDEX "IDX_2d4da6ebb58cf633823ec6b4a4" ON "punk" ("contract_id") `)
        await db.query(`CREATE INDEX "IDX_6fec11cbaea7c35d32fedbfbfa" ON "punk" ("owner_id") `)
        await db.query(`CREATE INDEX "IDX_79932c6380e8f65474c8c00668" ON "punk" ("current_ask_id") `)
        await db.query(`CREATE INDEX "IDX_69f18b713481e442134d4c1099" ON "punk" ("current_bid_id") `)
        await db.query(`CREATE INDEX "IDX_ce5b3874511f1d6cd91000143b" ON "punk" ("current_ask_created_id") `)
        await db.query(`CREATE INDEX "IDX_af62ab4969b8248620ff29a78d" ON "punk" ("current_bid_created_id") `)
        await db.query(`CREATE INDEX "IDX_ff7d4d0629e979868def39a665" ON "punk" ("current_ask_removed_id") `)
        await db.query(`CREATE INDEX "IDX_b0c1d7c632dee1c09e5bee1a99" ON "punk" ("current_bid_removed_id") `)
        await db.query(`CREATE TABLE "account" ("id" character varying NOT NULL, "number_of_punks_owned" numeric NOT NULL, "number_of_punks_assigned" numeric NOT NULL, "number_of_transfers" numeric NOT NULL, "number_of_sales" numeric NOT NULL, "number_of_purchases" numeric NOT NULL, "total_spent" numeric NOT NULL, "total_earned" numeric NOT NULL, "average_amount_spent" numeric NOT NULL, "account_url" text NOT NULL, CONSTRAINT "PK_54115ee388cdb6d86bb4bf5b2ea" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "c_token" ("id" character varying NOT NULL, "owner" text NOT NULL, "amount" numeric, "punk_id" text, "reference_id" text NOT NULL, "block_number" numeric NOT NULL, "block_hash" bytea NOT NULL, "tx_hash" bytea NOT NULL, "timestamp" numeric NOT NULL, "from_id" character varying, "to_id" character varying, CONSTRAINT "PK_4a1ef8720df75466d63b7ac97bd" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_e4b7c1b8bc4d8698a91db8c029" ON "c_token" ("from_id") `)
        await db.query(`CREATE INDEX "IDX_3c463372f6cccc1e0b0379a030" ON "c_token" ("to_id") `)
        await db.query(`CREATE TABLE "user_proxy" ("id" character varying NOT NULL, "block_number" numeric NOT NULL, "block_hash" bytea NOT NULL, "tx_hash" bytea NOT NULL, "timestamp" numeric NOT NULL, "user_id" character varying, CONSTRAINT "PK_4a159461ced957cbbea0a94bed7" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_e17dc32bcf20e9d45531e5f18d" ON "user_proxy" ("user_id") `)
        await db.query(`CREATE TABLE "epns_notification_counter" ("id" character varying NOT NULL, "total_count" numeric NOT NULL, CONSTRAINT "PK_e8adae4d21bb9369c795048ea2e" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "epns_push_notification" ("id" character varying NOT NULL, "notification_number" numeric NOT NULL, "recipient" text NOT NULL, "notification" text NOT NULL, CONSTRAINT "PK_3b1135305c3029eb8b764f93f16" PRIMARY KEY ("id"))`)
        await db.query(`ALTER TABLE "meta_data_trait" ADD CONSTRAINT "FK_5133265a0f5dd3d51028aeb4cfa" FOREIGN KEY ("metadata_id") REFERENCES "meta_data"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "meta_data_trait" ADD CONSTRAINT "FK_d8a43a8848bbf89b2eeef984319" FOREIGN KEY ("trait_id") REFERENCES "trait"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "meta_data" ADD CONSTRAINT "FK_7c904f6769acce17917d2786f34" FOREIGN KEY ("punk_id") REFERENCES "punk"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "event" ADD CONSTRAINT "FK_d7f8e8d962be3bdcb947d337fe4" FOREIGN KEY ("contract_id") REFERENCES "contract"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "event" ADD CONSTRAINT "FK_9380d479563e5a664759359470a" FOREIGN KEY ("nft_id") REFERENCES "punk"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "event" ADD CONSTRAINT "FK_3c07e2966f5f354edc1bf90fb5e" FOREIGN KEY ("to_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "event" ADD CONSTRAINT "FK_1ef887466d1bba1027a21c28e62" FOREIGN KEY ("from_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "offer" ADD CONSTRAINT "FK_a48706ab0d0e6edaf3eeb729515" FOREIGN KEY ("from_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "offer" ADD CONSTRAINT "FK_71609884f4478ed41be6672a668" FOREIGN KEY ("nft_id") REFERENCES "punk"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "offer" ADD CONSTRAINT "FK_3016d78cdb8099a58d883ee54d8" FOREIGN KEY ("created_id") REFERENCES "event"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "offer" ADD CONSTRAINT "FK_709c5e5468058229b0cb7387d74" FOREIGN KEY ("removed_id") REFERENCES "event"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "punk" ADD CONSTRAINT "FK_342776eb379a216795cc9f727dd" FOREIGN KEY ("transfered_to_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "punk" ADD CONSTRAINT "FK_68b6c75e96f08033b03127e4898" FOREIGN KEY ("assigned_to_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "punk" ADD CONSTRAINT "FK_78d46efff1a45a89276d26d85f4" FOREIGN KEY ("purchased_by_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "punk" ADD CONSTRAINT "FK_bb4f8f81f3861d03da316829ec1" FOREIGN KEY ("metadata_id") REFERENCES "meta_data"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "punk" ADD CONSTRAINT "FK_2d4da6ebb58cf633823ec6b4a4d" FOREIGN KEY ("contract_id") REFERENCES "contract"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "punk" ADD CONSTRAINT "FK_6fec11cbaea7c35d32fedbfbfaf" FOREIGN KEY ("owner_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "punk" ADD CONSTRAINT "FK_79932c6380e8f65474c8c006689" FOREIGN KEY ("current_ask_id") REFERENCES "offer"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "punk" ADD CONSTRAINT "FK_69f18b713481e442134d4c10994" FOREIGN KEY ("current_bid_id") REFERENCES "offer"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "punk" ADD CONSTRAINT "FK_ce5b3874511f1d6cd91000143bb" FOREIGN KEY ("current_ask_created_id") REFERENCES "event"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "punk" ADD CONSTRAINT "FK_af62ab4969b8248620ff29a78d2" FOREIGN KEY ("current_bid_created_id") REFERENCES "event"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "punk" ADD CONSTRAINT "FK_ff7d4d0629e979868def39a6656" FOREIGN KEY ("current_ask_removed_id") REFERENCES "event"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "punk" ADD CONSTRAINT "FK_b0c1d7c632dee1c09e5bee1a996" FOREIGN KEY ("current_bid_removed_id") REFERENCES "event"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "c_token" ADD CONSTRAINT "FK_e4b7c1b8bc4d8698a91db8c029b" FOREIGN KEY ("from_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "c_token" ADD CONSTRAINT "FK_3c463372f6cccc1e0b0379a030f" FOREIGN KEY ("to_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "user_proxy" ADD CONSTRAINT "FK_e17dc32bcf20e9d45531e5f18d8" FOREIGN KEY ("user_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "trait"`)
        await db.query(`DROP TABLE "meta_data_trait"`)
        await db.query(`DROP INDEX "public"."IDX_5133265a0f5dd3d51028aeb4cf"`)
        await db.query(`DROP INDEX "public"."IDX_d8a43a8848bbf89b2eeef98431"`)
        await db.query(`DROP TABLE "meta_data"`)
        await db.query(`DROP INDEX "public"."IDX_7c904f6769acce17917d2786f3"`)
        await db.query(`DROP TABLE "contract"`)
        await db.query(`DROP TABLE "event"`)
        await db.query(`DROP INDEX "public"."IDX_d7f8e8d962be3bdcb947d337fe"`)
        await db.query(`DROP INDEX "public"."IDX_9380d479563e5a664759359470"`)
        await db.query(`DROP INDEX "public"."IDX_3c07e2966f5f354edc1bf90fb5"`)
        await db.query(`DROP INDEX "public"."IDX_1ef887466d1bba1027a21c28e6"`)
        await db.query(`DROP TABLE "offer"`)
        await db.query(`DROP INDEX "public"."IDX_a48706ab0d0e6edaf3eeb72951"`)
        await db.query(`DROP INDEX "public"."IDX_71609884f4478ed41be6672a66"`)
        await db.query(`DROP INDEX "public"."IDX_3016d78cdb8099a58d883ee54d"`)
        await db.query(`DROP INDEX "public"."IDX_709c5e5468058229b0cb7387d7"`)
        await db.query(`DROP TABLE "punk"`)
        await db.query(`DROP INDEX "public"."IDX_342776eb379a216795cc9f727d"`)
        await db.query(`DROP INDEX "public"."IDX_68b6c75e96f08033b03127e489"`)
        await db.query(`DROP INDEX "public"."IDX_78d46efff1a45a89276d26d85f"`)
        await db.query(`DROP INDEX "public"."IDX_bb4f8f81f3861d03da316829ec"`)
        await db.query(`DROP INDEX "public"."IDX_2d4da6ebb58cf633823ec6b4a4"`)
        await db.query(`DROP INDEX "public"."IDX_6fec11cbaea7c35d32fedbfbfa"`)
        await db.query(`DROP INDEX "public"."IDX_79932c6380e8f65474c8c00668"`)
        await db.query(`DROP INDEX "public"."IDX_69f18b713481e442134d4c1099"`)
        await db.query(`DROP INDEX "public"."IDX_ce5b3874511f1d6cd91000143b"`)
        await db.query(`DROP INDEX "public"."IDX_af62ab4969b8248620ff29a78d"`)
        await db.query(`DROP INDEX "public"."IDX_ff7d4d0629e979868def39a665"`)
        await db.query(`DROP INDEX "public"."IDX_b0c1d7c632dee1c09e5bee1a99"`)
        await db.query(`DROP TABLE "account"`)
        await db.query(`DROP TABLE "c_token"`)
        await db.query(`DROP INDEX "public"."IDX_e4b7c1b8bc4d8698a91db8c029"`)
        await db.query(`DROP INDEX "public"."IDX_3c463372f6cccc1e0b0379a030"`)
        await db.query(`DROP TABLE "user_proxy"`)
        await db.query(`DROP INDEX "public"."IDX_e17dc32bcf20e9d45531e5f18d"`)
        await db.query(`DROP TABLE "epns_notification_counter"`)
        await db.query(`DROP TABLE "epns_push_notification"`)
        await db.query(`ALTER TABLE "meta_data_trait" DROP CONSTRAINT "FK_5133265a0f5dd3d51028aeb4cfa"`)
        await db.query(`ALTER TABLE "meta_data_trait" DROP CONSTRAINT "FK_d8a43a8848bbf89b2eeef984319"`)
        await db.query(`ALTER TABLE "meta_data" DROP CONSTRAINT "FK_7c904f6769acce17917d2786f34"`)
        await db.query(`ALTER TABLE "event" DROP CONSTRAINT "FK_d7f8e8d962be3bdcb947d337fe4"`)
        await db.query(`ALTER TABLE "event" DROP CONSTRAINT "FK_9380d479563e5a664759359470a"`)
        await db.query(`ALTER TABLE "event" DROP CONSTRAINT "FK_3c07e2966f5f354edc1bf90fb5e"`)
        await db.query(`ALTER TABLE "event" DROP CONSTRAINT "FK_1ef887466d1bba1027a21c28e62"`)
        await db.query(`ALTER TABLE "offer" DROP CONSTRAINT "FK_a48706ab0d0e6edaf3eeb729515"`)
        await db.query(`ALTER TABLE "offer" DROP CONSTRAINT "FK_71609884f4478ed41be6672a668"`)
        await db.query(`ALTER TABLE "offer" DROP CONSTRAINT "FK_3016d78cdb8099a58d883ee54d8"`)
        await db.query(`ALTER TABLE "offer" DROP CONSTRAINT "FK_709c5e5468058229b0cb7387d74"`)
        await db.query(`ALTER TABLE "punk" DROP CONSTRAINT "FK_342776eb379a216795cc9f727dd"`)
        await db.query(`ALTER TABLE "punk" DROP CONSTRAINT "FK_68b6c75e96f08033b03127e4898"`)
        await db.query(`ALTER TABLE "punk" DROP CONSTRAINT "FK_78d46efff1a45a89276d26d85f4"`)
        await db.query(`ALTER TABLE "punk" DROP CONSTRAINT "FK_bb4f8f81f3861d03da316829ec1"`)
        await db.query(`ALTER TABLE "punk" DROP CONSTRAINT "FK_2d4da6ebb58cf633823ec6b4a4d"`)
        await db.query(`ALTER TABLE "punk" DROP CONSTRAINT "FK_6fec11cbaea7c35d32fedbfbfaf"`)
        await db.query(`ALTER TABLE "punk" DROP CONSTRAINT "FK_79932c6380e8f65474c8c006689"`)
        await db.query(`ALTER TABLE "punk" DROP CONSTRAINT "FK_69f18b713481e442134d4c10994"`)
        await db.query(`ALTER TABLE "punk" DROP CONSTRAINT "FK_ce5b3874511f1d6cd91000143bb"`)
        await db.query(`ALTER TABLE "punk" DROP CONSTRAINT "FK_af62ab4969b8248620ff29a78d2"`)
        await db.query(`ALTER TABLE "punk" DROP CONSTRAINT "FK_ff7d4d0629e979868def39a6656"`)
        await db.query(`ALTER TABLE "punk" DROP CONSTRAINT "FK_b0c1d7c632dee1c09e5bee1a996"`)
        await db.query(`ALTER TABLE "c_token" DROP CONSTRAINT "FK_e4b7c1b8bc4d8698a91db8c029b"`)
        await db.query(`ALTER TABLE "c_token" DROP CONSTRAINT "FK_3c463372f6cccc1e0b0379a030f"`)
        await db.query(`ALTER TABLE "user_proxy" DROP CONSTRAINT "FK_e17dc32bcf20e9d45531e5f18d8"`)
    }
}
